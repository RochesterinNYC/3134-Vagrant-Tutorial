<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="3134-vagrant-tutorial : Vagrant Tutorial/Notes for 3134: Data Structures in Java">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>3134-vagrant-tutorial</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/RochesterinNYC/3134-Vagrant-Tutorial">View on GitHub</a>

          <h1 id="project_title">3134-vagrant-tutorial</h1>
          <h2 id="project_tagline">Vagrant Tutorial/Notes for 3134: Data Structures in Java</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/RochesterinNYC/3134-Vagrant-Tutorial/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/RochesterinNYC/3134-Vagrant-Tutorial/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p> 
Test
 </p>

<h2>
<a name="vagrant-tutorial" class="anchor" href="#vagrant-tutorial"><span class="octicon octicon-link"></span></a>Vagrant Tutorial</h2>

<h4>
<a name="3134---data-structures-in-java" class="anchor" href="#3134---data-structures-in-java"><span class="octicon octicon-link"></span></a>3134 - Data Structures in Java</h4>

<hr><p>The following is a tutorial/notes on how to use Vagrant to create and manage VMs for 3134: Data Structures in Java. We will be using VMs in this class to standardize the development environment of the students as well as the testing environment for the TAs and Professor Blaer.</p>

<hr><h3>
<a name="terms" class="anchor" href="#terms"><span class="octicon octicon-link"></span></a>Terms:</h3>

<h4>
<a name="virtual-machine-vm" class="anchor" href="#virtual-machine-vm"><span class="octicon octicon-link"></span></a>Virtual Machine (VM)</h4>

<h2></h2>

<h4>
<a name="vagrant" class="anchor" href="#vagrant"><span class="octicon octicon-link"></span></a>Vagrant</h4>

<ul>
<li>Wrapper for virtualbox operations and VM creation, configuration, management, etc.</li>
</ul><h4>
<a name="virtualbox" class="anchor" href="#virtualbox"><span class="octicon octicon-link"></span></a>Virtualbox</h4>

<ul>
<li>Virtualization software that </li>
</ul><h4>
<a name="box" class="anchor" href="#box"><span class="octicon octicon-link"></span></a>Box</h4>

<h4>
<a name="vagrantfile" class="anchor" href="#vagrantfile"><span class="octicon octicon-link"></span></a>Vagrantfile</h4>

<h4>
<a name="shared-folder" class="anchor" href="#shared-folder"><span class="octicon octicon-link"></span></a>Shared Folder</h4>

<hr><h3>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation:</h3>

<h4>
<a name="vagrant-1" class="anchor" href="#vagrant-1"><span class="octicon octicon-link"></span></a>Vagrant:</h4>

<p><a href="https://www.vagrantup.com/downloads" target="_blank">Vagrant Downloads</a></p>

<h4>
<a name="virtualbox-1" class="anchor" href="#virtualbox-1"><span class="octicon octicon-link"></span></a>Virtualbox:</h4>

<p><a href="https://www.virtualbox.org/wiki/Downloads" target="_blank">Virtual Downloads</a></p>

<p>Select downloads for appropriate OS.</p>

<hr><h3>
<a name="setup" class="anchor" href="#setup"><span class="octicon octicon-link"></span></a>Setup:</h3>

<h4>
<a name="setting-up-box" class="anchor" href="#setting-up-box"><span class="octicon octicon-link"></span></a>Setting up Box:</h4>

<p>- Download package.box</p>

<p>- Go to directory containing package.box</p>

<p>- Run box add command:</p>

<pre><code>vagrant box add [boxFile] --name [BoxName]
</code></pre>

<p>Ex:</p>

<pre><code>vagrant box add package.box --name 3134Box
</code></pre>

<p>3134Box is now the name of your box.</p>

<h4>
<a name="setting-up-vagrantfile" class="anchor" href="#setting-up-vagrantfile"><span class="octicon octicon-link"></span></a>Setting up Vagrantfile:</h4>

<p>- Initialize vagrantfile</p>

<pre><code>vagrant init
</code></pre>

<p>- Open the newly created Vagrantfile with a text editor and add the following lines of code at the bottom:</p>

<p>This specifies which box the VM to launch should use:</p>

<pre><code>config.vm.box = "3134Box"
</code></pre>

<p>This allows for the GUI (if the box is set up with one) to appear:</p>

<pre><code>config.vm.provider "virtualbox" do |vb|
  vb.gui = true
end
</code></pre>

<hr><h3>
<a name="starting-your-vm" class="anchor" href="#starting-your-vm"><span class="octicon octicon-link"></span></a>Starting your VM:</h3>

<p>- Go to the directory that contains your Vagrantfile.
- Run the following:</p>

<pre><code>vagrant up
</code></pre>

<h4>
<a name="shared-folders" class="anchor" href="#shared-folders"><span class="octicon octicon-link"></span></a>Shared Folders:</h4>

<p>The directory that you launched the VM from on your machine
will be the the same as </p>

<pre><code>/vagrant/ 
</code></pre>

<p>on the virtual machine. All data is shared between the two without any VM restart necessary.</p>

<hr><h3>
<a name="shutting-down-the-vm" class="anchor" href="#shutting-down-the-vm"><span class="octicon octicon-link"></span></a>Shutting Down the VM:</h3>

<p><a href="https://docs.vagrantup.com/v2/getting-started/teardown.html" target="_blank">Vagrant Teardown</a></p>

<h4>
<a name="from-your-machine" class="anchor" href="#from-your-machine"><span class="octicon octicon-link"></span></a>From Your Machine:</h4>

<p>Suspend: Saves your VM's disk storage and state. Analogous to closing your laptop hood/hibernating.</p>

<pre><code>vagrant suspend
</code></pre>

<p>Halt: Saves your VM's disk storage but not state. Analogous to shutting down your laptop. </p>

<pre><code>vagrant halt
</code></pre>

<p>Halt: Does not save your VM's disk storage or state. Removes all traces of your VM from your machine. Analogous to destroying your laptop. </p>

<pre><code>vagrant destroy
</code></pre>

<p>Note: Way to start the VM after any of these is still</p>

<pre><code>vagrant up
</code></pre>

<p>Though different things happen and load times will vary.
From fastest to slowest: vagrant suspend, vagrant halt, vagrant destroy</p>

<h4>
<a name="from-inside-vm" class="anchor" href="#from-inside-vm"><span class="octicon octicon-link"></span></a>From Inside VM:</h4>

<p>(Similar to vagrant halt)</p>

<pre><code>shutdown -h [time]
</code></pre>

<p>Ex.</p>

<pre><code>shutdown -h now
</code></pre>

<hr><h3>
<a name="example-workflow" class="anchor" href="#example-workflow"><span class="octicon octicon-link"></span></a>Example Workflow:</h3>

<ul>
<li>Create hw/project directory.</li>
<li>Either:

<ul>
<li>Initialize Vagrantfile and configure appropriately</li>
<li>Copy already configured Vagrantfile</li>
</ul>
</li>
<li>Start the VM with vagrant up</li>
<li>Create/edit .java files in whichever machine with whichever text editor
Either:

<ul>
<li>SSH into the VM with vagrant ssh</li>
<li>Work within the GUI of the VM</li>
</ul>
</li>
<li>Compile, run, and test (make sure you're running these in the VM to ensure compatibility with TA/Professor grading/testing environment)</li>
<li><p>when done with programming session or hw, shut down with vagrant suspend, halt, or destroy</p></li>
<li>
<p>Once vagrant and virtualbox are installed, box is added, then all you need to do to boot VMs is vagrant up with a Vagrantfile in directory.</p>

<h2>
<a name="vagrant-up-in-subdirectories-is-also-possible-link" class="anchor" href="#vagrant-up-in-subdirectories-is-also-possible-link"><span class="octicon octicon-link"></span></a>vagrant up in subdirectories is also possible: link</h2>
</li>
</ul><h3>
<a name="useful-vagrant-commands" class="anchor" href="#useful-vagrant-commands"><span class="octicon octicon-link"></span></a>Useful Vagrant commands:</h3>

<p><a href="https://docs.vagrantup.com/v2/cli/index.html" target="_blank">Vagrant Command Line Interface</a></p>

<p>List all added boxes:</p>

<pre><code>vagrant box list
</code></pre>

<p>Initialize new vagrant file:</p>

<pre><code>vagrant init
</code></pre>

<p>Start VM:</p>

<pre><code>vagrant up
</code></pre>

<p>Add a box:</p>

<pre><code>vagrant box add [boxFile] --name [BoxName]
</code></pre>

<p>SSH into VM:</p>

<pre><code>vagrant ssh
</code></pre>

<p>Suspend VM:</p>

<pre><code>vagrant suspend
</code></pre>

<p>Shutdown VM:</p>

<pre><code>vagrant halt
</code></pre>

<p>Destroy VM:</p>

<pre><code>vagrant destroy
</code></pre>

<p>talk about .vagrant directory</p>

<pre><code>Bringing machine 'default' up with 'virtualbox' provider...
==&gt; default: Importing base box '3134Box'...
==&gt; default: Matching MAC address for NAT networking...
==&gt; default: Setting the name of the VM: Vagrant_default_1410852242789_98187
==&gt; default: Clearing any previously set network interfaces...
==&gt; default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
==&gt; default: Forwarding ports...
    default: 22 =&gt; 2222 (adapter 1)
==&gt; default: Booting VM...
==&gt; default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
    default: Warning: Connection timeout. Retrying...
    default: Warning: Connection timeout. Retrying...
    default: Warning: Connection timeout. Retrying...
    default: Warning: Connection timeout. Retrying...
    default: Warning: Remote connection disconnect. Retrying...
==&gt; default: Machine booted and ready!
==&gt; default: Checking for guest additions in VM...
==&gt; default: Mounting shared folders...
    default: /vagrant =&gt; /Users/Rochester/Documents/3134-TA-Fall-2014/Vagrant


    dyn-160-39-228-106:Vagrant Rochester$ make
    javac -g OSPrint.java
    dyn-160-39-228-106:Vagrant Rochester$ make run
    java OSPrint
    This machine is running with the following properties:
    Operating System: Mac OS X 10.9.4
    Java Version: 1.7.0_67
    Architecture: x86_64
    User: Rochester
    Java Home Directory: /Library/Java/JavaVirtualMachines/jdk1.7.0_67.jdk/Contents/Home/jre

    vagrant@base2:/vagrant$ make
    make: Nothing to be done for `default'.
    vagrant@base2:/vagrant$ make run
    java OSPrint
    This machine is running with the following properties:
    Operating System: Linux 3.13.0-35-generic
    Java Version: 1.7.0_65
    Architecture: amd64
    User: vagrant
    Java Home Directory: /usr/lib/jvm/java-7-openjdk-amd64/jre


    - Notice that the make on the VM produces the "make: Nothing to be done for `default'." message because the java files were already compiled on your machine and the directory is shared so the .class files are already present when make is ran on the VM.
    - Notice the different operating systems, java version, where java is located, and the user names.
    - Architecture is actually the same (x86_64 and amd64 are just different names for same architecture)
</code></pre>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">3134-vagrant-tutorial maintained by <a href="https://github.com/RochesterinNYC">RochesterinNYC</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
